import{H as W,d as J,r as u,o as X,c as h,b as l,e,j as m,y as E,z as K,f as y,u as x,A as Y,B as Z,i,v as ee,t as s,F as S,m as D,X as L,M as te,h as n,q as $}from"./index-CBlyhhB_.js";import{u as se}from"./salesStore--0mzQDZj.js";import{C as re}from"./chevron-down-CAD7_O72.js";/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=W("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),oe={class:"receipts-container dark:bg-gray-900"},le={class:"mb-6 flex justify-between items-center"},ne={class:"flex space-x-2"},ie={class:"relative"},de={class:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},ue={class:"relative"},ce={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden"},ge={key:0,class:"flex justify-center items-center h-64"},pe={key:1,class:"text-red-500 dark:text-red-400 text-center py-8"},be={key:2,class:"text-center py-8 text-gray-500 dark:text-gray-400"},ye={key:3},xe={class:"overflow-x-auto"},me={class:"w-full border-collapse"},ve={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},fe={class:"px-6 py-4 whitespace-nowrap dark:text-gray-200"},he={class:"px-6 py-4 whitespace-nowrap dark:text-gray-200"},ke={class:"px-6 py-4 whitespace-nowrap dark:text-gray-200"},we={class:"px-6 py-4 whitespace-nowrap dark:text-gray-200"},_e={class:"px-6 py-4 whitespace-nowrap dark:text-gray-200"},Ce={class:"px-6 py-4 whitespace-nowrap"},Te={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Re=["onClick"],Ne=["onClick"],Se=["onClick"],De={class:"px-6 py-4 bg-gray-50 dark:bg-gray-700 flex justify-between items-center border-t border-gray-200 dark:border-gray-600"},je={class:"text-sm text-gray-500 dark:text-gray-400"},Me={class:"font-medium"},Ee={class:"font-medium"},Le={class:"font-medium"},$e={class:"flex space-x-2"},Ae=["disabled"],Pe=["disabled"],Ie={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ve={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 max-w-2xl w-full mx-4"},Be={class:"flex justify-between items-center mb-4"},Ue={class:"text-xl font-bold dark:text-white"},Fe={key:0,class:"receipt-preview p-4 bg-white border border-gray-200 dark:bg-gray-900 dark:border-gray-700 rounded-lg"},ze={class:"mb-4 flex justify-between"},qe={class:"text-sm"},Qe={class:"text-sm"},Ge={class:"text-sm"},He={class:"text-sm"},Oe={class:"mb-4"},We={class:"text-sm"},Je={key:0,class:"text-sm"},Xe={class:"border-t border-b border-gray-200 dark:border-gray-700 py-2 mb-4"},Ke={class:"flex space-x-8"},Ye={class:"w-8 text-center"},Ze={class:"w-16 text-right"},et={class:"w-16 text-right"},tt={class:"space-y-1 mb-4"},st={class:"flex justify-between text-sm"},rt={class:"flex justify-between text-sm"},at={key:0,class:"flex justify-between text-sm"},ot={class:"flex justify-between font-bold mt-2"},lt={class:"border-t border-gray-200 dark:border-gray-700 pt-4 text-center"},nt={class:"text-sm mb-2"},it={class:"text-sm mb-4"},dt={class:"mt-4"},ut={class:"text-xs mt-2"},ct={class:"flex justify-between mt-6"},gt={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},pt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 max-w-3xl w-full mx-4"},bt={class:"flex justify-between items-center mb-4"},yt={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},xt=["onClick"],mt={class:"flex justify-between items-start mb-2"},vt={class:"font-medium dark:text-white"},ft={key:0,class:"px-2 py-0.5 text-xs bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300 rounded-full"},ht={class:"text-sm text-gray-500 dark:text-gray-400 mb-2"},kt={class:"h-32 border border-gray-200 dark:border-gray-700 rounded bg-white dark:bg-gray-900 p-2 text-center text-xs overflow-hidden"},wt={class:"mt-2 border-t border-gray-200 dark:border-gray-700"},_t={class:"flex justify-between"},Dt=J({__name:"ReceiptsView",setup(Ct){const g=u(1),v=u(10),k=u(""),w=u("all"),f=se(),_=u(!1),R=u(""),C=u(!1),T=u(!1),o=u(null),N=u(0),j=u([{id:"template1",name:"Standard Receipt",description:"Default receipt format with full details",isDefault:!0,layout:"standard",showLogo:!0,showBarcode:!0,footerText:"Thank you for your business!"},{id:"template2",name:"Compact Receipt",description:"Shortened receipt format to save paper",isDefault:!1,layout:"compact",showLogo:!1,showBarcode:!0,footerText:"Thank you!"},{id:"template3",name:"Detailed Receipt",description:"Extended receipt with more customer information",isDefault:!1,layout:"detailed",showLogo:!0,showBarcode:!0,footerText:"We appreciate your business!"},{id:"template4",name:"Email Receipt",description:"Optimized for email delivery",isDefault:!1,layout:"email",showLogo:!0,showBarcode:!1,footerText:"Questions? Contact customer service."}]);X(async()=>{try{_.value=!0,await f.fetchReceipts(),_.value=!1}catch(a){_.value=!1,R.value="Error fetching receipts",console.error("Error fetching receipts:",a)}});const p=h(()=>{if(!f.receipts||f.receipts.length===0)return[];let a=[...f.receipts];if(w.value!=="all"&&(a=a.filter(t=>t.type===w.value)),k.value){const t=k.value.toLowerCase();a=a.filter(d=>d.receiptNumber.toLowerCase().includes(t)||d.transactionId.toLowerCase().includes(t)||d.customerName&&d.customerName.toLowerCase().includes(t))}return a.sort((t,d)=>new Date(d.date).getTime()-new Date(t.date).getTime())}),A=h(()=>{const a=(g.value-1)*v.value,t=a+v.value;return p.value.slice(a,t)}),P=h(()=>Math.ceil(p.value.length/v.value)),I=h(()=>p.value.length>0?(g.value-1)*v.value+1:0),V=h(()=>{const a=g.value*v.value;return a>p.value.length?p.value.length:a}),M=a=>{try{if(!a)return"N/A";const t=new Date(a);return isNaN(t.getTime())?"Invalid date":new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)}catch(t){return console.error("Error formatting date:",a,t),"Invalid date"}},b=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a),B=a=>a?a.charAt(0).toUpperCase()+a.slice(1):"Unknown",U=a=>{const t=f.receipts.find(d=>d.id===a);t&&(o.value=t,C.value=!0)},F=a=>{console.log(`Emailing receipt: ${a}`)},z=a=>{console.log(`Printing receipt: ${a}`)},q=()=>{o.value&&console.log(`Printing selected receipt: ${o.value.id}`)},Q=()=>{o.value&&console.log(`Emailing selected receipt: ${o.value.id}`)},G=()=>{T.value=!0},H=()=>{console.log(`Editing template: ${JSON.stringify(j.value[N.value])}`)},O=()=>{console.log("Creating new template")};return(a,t)=>{var d;return n(),l("div",oe,[e("header",le,[t[10]||(t[10]=e("div",null,[e("h1",{class:"text-3xl font-bold dark:text-white"},"Receipt Management"),e("p",{class:"text-gray-500 dark:text-gray-400 mt-2"},"View and manage transaction receipts")],-1)),e("div",ne,[e("div",ie,[E(e("input",{type:"text",placeholder:"Search receipts...",class:"px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":t[0]||(t[0]=r=>k.value=r)},null,512),[[K,k.value]]),e("button",de,[y(x(Y),{class:"w-5 h-5"})])]),e("div",ue,[E(e("select",{class:"appearance-none px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent pr-8","onUpdate:modelValue":t[1]||(t[1]=r=>w.value=r)},t[8]||(t[8]=[e("option",{value:"all"},"All Types",-1),e("option",{value:"sale"},"Sale",-1),e("option",{value:"refund"},"Refund",-1)]),512),[[Z,w.value]]),y(x(re),{class:"absolute right-3 top-3 w-4 h-4 text-gray-400 pointer-events-none"})]),e("button",{class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 text-white font-medium rounded-lg transition-colors",onClick:G},[y(x(ee),{class:"w-5 h-5 mr-1 inline-block"}),t[9]||(t[9]=i(" Receipt Templates "))])])]),e("section",ce,[_.value?(n(),l("div",ge,t[11]||(t[11]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 dark:border-gray-100"},null,-1)]))):R.value?(n(),l("div",pe,s(R.value),1)):p.value.length===0?(n(),l("div",be," No receipts found. ")):(n(),l("div",ye,[e("div",xe,[e("table",me,[t[12]||(t[12]=e("thead",null,[e("tr",{class:"bg-gray-50 dark:bg-gray-700 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},[e("th",{class:"px-6 py-3"},"Receipt #"),e("th",{class:"px-6 py-3"},"Date"),e("th",{class:"px-6 py-3"},"Transaction"),e("th",{class:"px-6 py-3"},"Customer"),e("th",{class:"px-6 py-3"},"Amount"),e("th",{class:"px-6 py-3"},"Type"),e("th",{class:"px-6 py-3"},"Actions")])],-1)),e("tbody",ve,[(n(!0),l(S,null,D(A.value,r=>(n(),l("tr",{key:r.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",fe,s(r.receiptNumber),1),e("td",he,s(M(r.date)),1),e("td",ke,s(r.transactionId),1),e("td",we,s(r.customerName||"Guest"),1),e("td",_e,s(b(r.totalAmount)),1),e("td",Ce,[e("span",{class:$(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",r.type==="sale"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300"])},s(B(r.type)),3)]),e("td",Te,[e("button",{class:"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 mr-3",onClick:c=>U(r.id)}," View ",8,Re),e("button",{class:"text-green-600 dark:text-green-400 hover:text-green-900 dark:hover:text-green-300 mr-3",onClick:c=>F(r.id)}," Email ",8,Ne),e("button",{class:"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-300",onClick:c=>z(r.id)}," Print ",8,Se)])]))),128))])])]),e("div",De,[e("div",je,[t[13]||(t[13]=i(" Showing ")),e("span",Me,s(I.value),1),t[14]||(t[14]=i(" to ")),e("span",Ee,s(V.value),1),t[15]||(t[15]=i(" of ")),e("span",Le,s(p.value.length),1),t[16]||(t[16]=i(" receipts "))]),e("div",$e,[e("button",{class:"px-3 py-1 rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",disabled:g.value===1,onClick:t[2]||(t[2]=r=>g.value--)}," Previous ",8,Ae),e("button",{class:"px-3 py-1 rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",disabled:g.value===P.value,onClick:t[3]||(t[3]=r=>g.value++)}," Next ",8,Pe)])])]))]),C.value?(n(),l("div",Ie,[e("div",Ve,[e("div",Be,[e("h3",Ue,"Receipt #"+s((d=o.value)==null?void 0:d.receiptNumber),1),e("button",{onClick:t[4]||(t[4]=r=>C.value=!1),class:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},[y(x(L),{class:"w-5 h-5"})])]),o.value?(n(),l("div",Fe,[t[30]||(t[30]=e("div",{class:"text-center mb-6"},[e("h4",{class:"font-bold text-lg"},"Store Name"),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"123 Main Street, City, State 12345"),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Tel: (123) 456-7890")],-1)),e("div",ze,[e("div",null,[e("p",qe,[t[17]||(t[17]=e("span",{class:"font-semibold"},"Receipt:",-1)),i(" #"+s(o.value.receiptNumber),1)]),e("p",Qe,[t[18]||(t[18]=e("span",{class:"font-semibold"},"Date:",-1)),i(" "+s(M(o.value.date)),1)])]),e("div",null,[e("p",Ge,[t[19]||(t[19]=e("span",{class:"font-semibold"},"Cashier:",-1)),i(" "+s(o.value.cashierName),1)]),e("p",He,[t[20]||(t[20]=e("span",{class:"font-semibold"},"Terminal:",-1)),i(" "+s(o.value.terminalId),1)])])]),e("div",Oe,[e("p",We,[t[21]||(t[21]=e("span",{class:"font-semibold"},"Customer:",-1)),i(" "+s(o.value.customerName||"Guest"),1)]),o.value.customerEmail?(n(),l("p",Je,[t[22]||(t[22]=e("span",{class:"font-semibold"},"Email:",-1)),i(" "+s(o.value.customerEmail),1)])):m("",!0)]),e("div",Xe,[t[23]||(t[23]=e("div",{class:"flex justify-between font-semibold text-sm mb-2"},[e("span",null,"Item"),e("div",{class:"flex space-x-8"},[e("span",null,"Qty"),e("span",null,"Price"),e("span",null,"Total")])],-1)),(n(!0),l(S,null,D(o.value.items,(r,c)=>(n(),l("div",{key:c,class:"flex justify-between text-sm py-1"},[e("span",null,s(r.name),1),e("div",Ke,[e("span",Ye,s(r.quantity),1),e("span",Ze,s(b(r.price)),1),e("span",et,s(b(r.quantity*r.price)),1)])]))),128))]),e("div",tt,[e("div",st,[t[24]||(t[24]=e("span",null,"Subtotal:",-1)),e("span",null,s(b(o.value.subtotal)),1)]),e("div",rt,[e("span",null,"Tax ("+s(o.value.taxRate)+"%):",1),e("span",null,s(b(o.value.taxAmount)),1)]),o.value.discountAmount&&o.value.discountAmount>0?(n(),l("div",at,[t[25]||(t[25]=e("span",null,"Discount:",-1)),e("span",null,"-"+s(b(o.value.discountAmount||0)),1)])):m("",!0),e("div",ot,[t[26]||(t[26]=e("span",null,"Total:",-1)),e("span",null,s(b(o.value.totalAmount)),1)])]),e("div",lt,[e("p",nt,s(o.value.type==="sale"?"Payment Method:":"Refund Method:")+" "+s(o.value.paymentMethod),1),e("p",it,s(o.value.paymentReference?`Reference: ${o.value.paymentReference}`:""),1),e("div",dt,[t[27]||(t[27]=e("svg",{class:"mx-auto h-20 w-20",viewBox:"0 0 100 100"},[e("rect",{x:"10",y:"10",width:"80",height:"80",fill:"none",stroke:"currentColor","stroke-width":"2"}),e("text",{x:"50",y:"55","text-anchor":"middle",class:"text-xs"},"QR Code")],-1)),e("p",ut,s(o.value.id),1)]),t[28]||(t[28]=e("p",{class:"text-sm mt-6"},"Thank you for your business!",-1)),t[29]||(t[29]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},"Return policy: Items can be returned within 30 days with receipt",-1))])])):m("",!0),e("div",ct,[e("div",null,[e("button",{class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 text-white font-medium rounded-lg transition-colors mr-2",onClick:q},[y(x(ae),{class:"w-4 h-4 mr-1 inline-block"}),t[31]||(t[31]=i(" Print "))]),e("button",{class:"px-4 py-2 bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800 text-white font-medium rounded-lg transition-colors",onClick:Q},[y(x(te),{class:"w-4 h-4 mr-1 inline-block"}),t[32]||(t[32]=i(" Email "))])]),e("button",{class:"px-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 font-medium rounded-lg transition-colors",onClick:t[5]||(t[5]=r=>C.value=!1)}," Close ")])])])):m("",!0),T.value?(n(),l("div",gt,[e("div",pt,[e("div",bt,[t[33]||(t[33]=e("h3",{class:"text-xl font-bold dark:text-white"},"Receipt Templates",-1)),e("button",{onClick:t[6]||(t[6]=r=>T.value=!1),class:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},[y(x(L),{class:"w-5 h-5"})])]),e("div",yt,[(n(!0),l(S,null,D(j.value,(r,c)=>(n(),l("div",{key:c,class:$(["border border-gray-200 dark:border-gray-700 rounded-lg p-4 cursor-pointer transition-all",N.value===c?"ring-2 ring-blue-500 dark:ring-blue-400":"hover:bg-gray-50 dark:hover:bg-gray-700"]),onClick:Tt=>N.value=c},[e("div",mt,[e("h4",vt,s(r.name),1),r.isDefault?(n(),l("span",ft,"Default")):m("",!0)]),e("p",ht,s(r.description),1),e("div",kt,[t[34]||(t[34]=e("div",{class:"text-center"},[e("p",{class:"font-bold"},"Store Name"),e("p",null,"123 Main Street")],-1)),e("div",wt,[e("p",null,s(r.layout==="compact"?"Compact Layout":"Standard Layout"),1),e("p",null,s(r.showLogo?"With Logo":"No Logo"),1)])])],10,xt))),128))]),e("div",_t,[e("div",null,[e("button",{class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 text-white font-medium rounded-lg transition-colors mr-2",onClick:H}," Edit "),e("button",{class:"px-4 py-2 bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800 text-white font-medium rounded-lg transition-colors",onClick:O}," New Template ")]),e("button",{class:"px-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 font-medium rounded-lg transition-colors",onClick:t[7]||(t[7]=r=>T.value=!1)}," Close ")])])])):m("",!0)])}}});export{Dt as default};
