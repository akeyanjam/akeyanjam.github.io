import{d as N,o as S,r as f,c as v,b as a,e,f as d,g as b,u as l,_ as p,y as z,A,z as U,F as h,m as x,t as i,aQ as D,h as n,i as y,q as V}from"./index-CBlyhhB_.js";import{u as $}from"./employeesStore-DWx-ZwU_.js";import{P as B}from"./plus-DRTQa6gY.js";import{E as L}from"./ellipsis-CpwB6luc.js";import{P as M}from"./pencil-C1ltbjfH.js";import{T}from"./trash-CB4RN-qP.js";import{C as q}from"./check-DoiXQjlb.js";const F={class:"permissions-view dark:bg-gray-900"},O={class:"mb-6"},Q={class:"flex justify-between items-center"},G={class:"flex items-center gap-2"},H={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},J={class:"lg:col-span-1 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden h-auto"},K={class:"flex items-center justify-between px-6 py-4 border-b border-gray-100 dark:border-gray-700"},W={class:"relative"},X={class:"overflow-y-auto",style:{"max-height":"500px"}},Y=["onClick"],Z={class:"flex items-center justify-between"},I={class:"font-medium dark:text-white"},ee={class:"text-sm text-gray-500 dark:text-gray-400"},te={class:"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300"},se={class:"lg:col-span-2"},re={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden mb-6"},oe={class:"px-6 py-4 border-b border-gray-100 dark:border-gray-700"},ae={class:"flex justify-between items-center"},de={class:"text-lg font-bold dark:text-white"},le={class:"flex gap-2"},ie={class:"text-gray-500 dark:text-gray-400 mt-1"},ne={class:"px-6 py-4"},ce={class:"grid grid-cols-1 gap-3 mb-6"},ge={class:"bg-gray-50 dark:bg-gray-700 px-4 py-2 font-medium dark:text-white"},ue={class:"p-4 space-y-2"},ye=["id","checked","onChange"],me=["for"],be={class:"text-xs text-gray-500 dark:text-gray-400 ml-1"},pe={class:"border border-gray-200 dark:border-gray-700 rounded-md overflow-hidden mb-4"},he={class:"overflow-x-auto"},xe={class:"w-full border-collapse"},fe={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ve={class:"px-6 py-3"},ke={class:"flex items-center"},_e={class:"h-8 w-8 rounded-full bg-blue-500 dark:bg-blue-600 flex items-center justify-center text-white font-medium text-xs"},we={class:"ml-3 dark:text-gray-200"},Ce={class:"px-6 py-3 dark:text-gray-200"},Ee={class:"px-6 py-3 dark:text-gray-200"},Pe={class:"flex justify-end"},Re={key:1,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 flex items-center justify-center p-8"},je={class:"text-center"},Ne={class:"inline-flex items-center justify-center h-16 w-16 rounded-full bg-gray-100 dark:bg-gray-700 mb-4"},Me=N({__name:"PermissionsView",setup(Se){const c=$();S(async()=>{await c.fetchRoles(),await c.fetchPermissions(),await c.fetchEmployees()});const m=f(""),o=f(null),k=v(()=>{if(!m.value)return c.roles;const r=m.value.toLowerCase();return c.roles.filter(t=>t.name.toLowerCase().includes(r)||t.description.toLowerCase().includes(r))}),_=v(()=>{const r={};for(const t of c.permissions)r[t.module]||(r[t.module]=[]),r[t.module].push(t);return r}),w=r=>{o.value={...r}},C=r=>{if(!o.value)return;const t=[...o.value.permissions],s=t.indexOf(r);s!==-1?t.splice(s,1):t.push(r),o.value={...o.value,permissions:t}},E=r=>{const t=c.employees.find(s=>s.id===r);return t?`${t.firstName} ${t.lastName}`:"Unknown Employee"},P=r=>{const t=c.employees.find(s=>s.id===r);return t?(t.firstName.charAt(0)+t.lastName.charAt(0)).toUpperCase():"UE"},R=r=>{const t=c.employees.find(s=>s.id===r);return t?t.position:"Unknown"},j=r=>{const t=c.employees.find(s=>s.id===r);return t?t.department:"Unknown"};return(r,t)=>(n(),a("div",F,[e("header",O,[e("div",Q,[t[2]||(t[2]=e("div",null,[e("h1",{class:"text-2xl font-bold dark:text-white"},"Permissions Management"),e("p",{class:"text-gray-500 dark:text-gray-400 mt-1"},"Configure roles and access control for employees")],-1)),e("div",G,[d(l(p),{size:"sm",class:"bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 text-white"},{default:b(()=>[d(l(B),{class:"mr-2 h-4 w-4"}),t[1]||(t[1]=y(" Add Role "))]),_:1})])])]),e("div",H,[e("section",J,[e("div",K,[t[3]||(t[3]=e("h2",{class:"text-lg font-bold dark:text-white"},"Roles",-1)),e("div",W,[d(l(A),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 h-4 w-4"}),z(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>m.value=s),type:"text",placeholder:"Search roles",class:"pl-10 pr-4 py-2 border border-gray-200 dark:border-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:text-gray-200 text-sm w-full"},null,512),[[U,m.value]])])]),e("div",X,[(n(!0),a(h,null,x(k.value,s=>{var u;return n(),a("div",{key:s.id,class:V(["px-6 py-3 border-b border-gray-100 dark:border-gray-700 last:border-0 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700",{"bg-blue-50 dark:bg-blue-900/20":((u=o.value)==null?void 0:u.id)===s.id}]),onClick:g=>w(s)},[e("div",Z,[e("div",null,[e("h3",I,i(s.name),1),e("p",ee,i(s.employees.length)+" assigned users",1)]),e("button",te,[d(l(L),{class:"h-4 w-4"})])])],10,Y)}),128))])]),e("section",se,[o.value?(n(),a("div",re,[e("div",oe,[e("div",ae,[e("h2",de,i(o.value.name),1),e("div",le,[d(l(p),{variant:"outline",size:"sm",class:"dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700"},{default:b(()=>[d(l(M),{class:"mr-2 h-4 w-4"}),t[4]||(t[4]=y(" Edit Role "))]),_:1}),d(l(p),{variant:"outline",size:"sm",class:"text-red-600 border-red-200 hover:bg-red-50 dark:border-red-800 dark:text-red-400"},{default:b(()=>[d(l(T),{class:"mr-2 h-4 w-4"}),t[5]||(t[5]=y(" Delete "))]),_:1})])]),e("p",ie,i(o.value.description),1)]),e("div",ne,[t[9]||(t[9]=e("h3",{class:"font-medium mb-3 dark:text-white"},"Permissions",-1)),e("div",ce,[(n(!0),a(h,null,x(_.value,(s,u)=>(n(),a("div",{key:u,class:"border border-gray-200 dark:border-gray-700 rounded-md overflow-hidden"},[e("div",ge,i(u),1),e("div",ue,[(n(!0),a(h,null,x(s,g=>(n(),a("div",{key:g.id,class:"flex items-center"},[e("input",{id:g.id,type:"checkbox",class:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700",checked:o.value.permissions.includes(g.id),onChange:ze=>C(g.id)},null,40,ye),e("label",{for:g.id,class:"ml-2 text-sm dark:text-gray-200"},[y(i(g.name)+" ",1),e("span",be,i(g.actions.join(", ")),1)],8,me)]))),128))])]))),128))]),t[10]||(t[10]=e("h3",{class:"font-medium mb-3 dark:text-white"},"Assigned Employees",-1)),e("div",pe,[e("div",he,[e("table",xe,[t[7]||(t[7]=e("thead",null,[e("tr",{class:"bg-gray-50 dark:bg-gray-700 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},[e("th",{class:"px-6 py-3"},"Employee"),e("th",{class:"px-6 py-3"},"Position"),e("th",{class:"px-6 py-3"},"Department"),e("th",{class:"px-6 py-3"},"Actions")])],-1)),e("tbody",fe,[(n(!0),a(h,null,x(o.value.employees,s=>(n(),a("tr",{key:s,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",ve,[e("div",ke,[e("div",_e,i(P(s)),1),e("span",we,i(E(s)),1)])]),e("td",Ce,i(R(s)),1),e("td",Ee,i(j(s)),1),t[6]||(t[6]=e("td",{class:"px-6 py-3"},[e("button",{class:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200 text-sm"}," Remove ")],-1))]))),128))])])])]),e("div",Pe,[d(l(p),{size:"sm",class:"bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 text-white"},{default:b(()=>[d(l(q),{class:"mr-2 h-4 w-4"}),t[8]||(t[8]=y(" Save Changes "))]),_:1})])])])):(n(),a("div",Re,[e("div",je,[e("div",Ne,[d(l(D),{class:"h-8 w-8 text-gray-500 dark:text-gray-400"})]),t[11]||(t[11]=e("h3",{class:"text-lg font-medium dark:text-white"},"No Role Selected",-1)),t[12]||(t[12]=e("p",{class:"text-gray-500 dark:text-gray-400 mt-1"}," Select a role from the list to view and edit its permissions. ",-1))])]))])])]))}});export{Me as default};
