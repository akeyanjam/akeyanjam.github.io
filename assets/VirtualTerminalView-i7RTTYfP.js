import{d as B,r as y,o as $,c as b,b as o,e,j as v,y as l,z as d,B as E,F as w,m as h,t as u,u as p,q as c,f as C,h as n,i as L,x as R}from"./index-CBlyhhB_.js";import{u as z}from"./paymentsStore-DGeoRBLV.js";import{C as O}from"./circle-check-big-Bb_rpdUY.js";import{C as Y}from"./circle-alert-k50upteO.js";const q={class:"dark:bg-gray-900"},_={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},G={class:"col-span-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 p-6"},H={class:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-5"},J={class:"col-span-1"},K={class:"relative"},Q={class:"col-span-1"},W=["value"],X={class:"col-span-2"},Z={class:"col-span-2"},ee={class:"col-span-2"},re={class:"col-span-2"},te={class:"col-span-2"},ae={class:"col-span-2 flex justify-end space-x-3 mt-4"},se=["disabled"],le={class:"col-span-1 space-y-6"},de={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 p-6"},oe={class:"space-y-4"},ne={class:"flex justify-between text-sm"},ue={class:"font-medium dark:text-white"},ie={class:"flex justify-between text-sm"},ge={class:"font-medium dark:text-white"},ye={class:"flex justify-between text-sm"},be={class:"font-medium dark:text-white"},me={class:"flex justify-between text-sm"},pe={class:"font-medium dark:text-white"},ce={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 p-6"},xe={key:0,class:"flex justify-center items-center py-8"},fe={key:1,class:"text-center py-6 text-gray-500 dark:text-gray-400"},ke={key:2,class:"space-y-3"},ve=["onClick"],we={class:"flex justify-between mb-1"},he={class:"font-medium dark:text-white"},Ce={class:"text-gray-500 dark:text-gray-400"},Ve={class:"flex justify-between"},Ae={class:"text-gray-500 dark:text-gray-400"},Me={key:0},Ie={class:"flex items-center"},Ne={key:0,class:"text-green-700 dark:text-green-300 mr-2"},Pe={key:1,class:"text-red-700 dark:text-red-300 mr-2"},$e=B({__name:"VirtualTerminalView",setup(Te){const V=R(),i=z(),{isLoading:A,error:Ue,fetchPaymentMethods:M,fetchTransactions:I}=i,t=y({amount:null,paymentMethodId:"",reference:"",cardNumber:"",expiration:"",cvv:"",cardholderName:"",billingAddress:{line1:"",line2:"",city:"",state:"",postalCode:"",country:""},customerId:"",email:""}),m=y(!1),x=y(""),g=y("success");$(async()=>{try{await Promise.all([M(),I()])}catch(s){console.error("Error fetching data:",s)}});const N=b(()=>i.paymentMethods.filter(s=>(s.type==="credit"||s.type==="debit")&&s.isEnabled)),f=b(()=>i.transactions.filter(s=>!s.isCardPresent).sort((s,r)=>new Date(r.date).getTime()-new Date(s.date).getTime()).slice(0,5)),P=b(()=>{if(!t.value.paymentMethodId)return"—";const s=i.getPaymentMethodById(t.value.paymentMethodId);return s?s.name:"—"}),T=b(()=>t.value.amount!==null&&t.value.amount>0&&t.value.paymentMethodId&&t.value.cardNumber&&t.value.expiration&&t.value.cvv&&t.value.cardholderName&&t.value.billingAddress.line1&&t.value.billingAddress.city&&t.value.billingAddress.state&&t.value.billingAddress.postalCode&&t.value.billingAddress.country),U=s=>{const r=new Date(s);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(r)},S=s=>s?s.length>=4?`•••• ${s.slice(-4)}`:s:"",D=s=>{switch(s){case"captured":case"settled":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"authorized":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"failed":case"voided":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";case"refunded":case"partially_refunded":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},k=()=>{t.value={amount:null,paymentMethodId:"",reference:"",cardNumber:"",expiration:"",cvv:"",cardholderName:"",billingAddress:{line1:"",line2:"",city:"",state:"",postalCode:"",country:""},customerId:"",email:""}},F=()=>{console.log("Processing payment:",t.value),x.value="Payment processed successfully!",g.value="success",m.value=!0,setTimeout(()=>{m.value=!1},3e3),k()},j=s=>{V.push(`/payments/transactions/${s}`)};return(s,r)=>(n(),o("div",q,[r[43]||(r[43]=e("header",{class:"mb-6"},[e("h1",{class:"text-3xl font-bold dark:text-white"},"Virtual Terminal"),e("p",{class:"text-gray-500 dark:text-gray-400 mt-2"},"Process card-not-present transactions")],-1)),e("div",_,[e("div",G,[r[35]||(r[35]=e("h2",{class:"text-xl font-bold mb-6 dark:text-white"},"Payment Information",-1)),e("div",H,[e("div",J,[r[16]||(r[16]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Payment Amount* ",-1)),e("div",K,[r[15]||(r[15]=e("span",{class:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500 dark:text-gray-400"}," $ ",-1)),l(e("input",{type:"number",placeholder:"0.00",step:"0.01",class:"w-full pl-8 px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":r[0]||(r[0]=a=>t.value.amount=a)},null,512),[[d,t.value.amount]])])]),e("div",Q,[r[18]||(r[18]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Payment Method* ",-1)),l(e("select",{class:"w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":r[1]||(r[1]=a=>t.value.paymentMethodId=a)},[r[17]||(r[17]=e("option",{value:""},"Select payment method",-1)),(n(!0),o(w,null,h(N.value,a=>(n(),o("option",{key:a.id,value:a.id},u(a.name),9,W))),128))],512),[[E,t.value.paymentMethodId]])]),e("div",X,[r[19]||(r[19]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Reference ",-1)),l(e("input",{type:"text",placeholder:"Order #, Invoice #, etc.",class:"w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":r[2]||(r[2]=a=>t.value.reference=a)},null,512),[[d,t.value.reference]])]),r[32]||(r[32]=e("div",{class:"col-span-2"},[e("hr",{class:"my-2 border-gray-200 dark:border-gray-700"}),e("h3",{class:"font-medium mb-3 dark:text-white"},"Card Information")],-1)),e("div",Z,[r[20]||(r[20]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Card Number* ",-1)),l(e("input",{type:"text",placeholder:"•••• •••• •••• ••••",class:"w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":r[3]||(r[3]=a=>t.value.cardNumber=a)},null,512),[[d,t.value.cardNumber]])]),e("div",null,[r[21]||(r[21]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Expiration Date* ",-1)),l(e("input",{type:"text",placeholder:"MM/YY",class:"w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":r[4]||(r[4]=a=>t.value.expiration=a)},null,512),[[d,t.value.expiration]])]),e("div",null,[r[22]||(r[22]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," CVV* ",-1)),l(e("input",{type:"text",placeholder:"123",class:"w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":r[5]||(r[5]=a=>t.value.cvv=a)},null,512),[[d,t.value.cvv]])]),e("div",ee,[r[23]||(r[23]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Cardholder Name* ",-1)),l(e("input",{type:"text",placeholder:"Name as it appears on card",class:"w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":r[6]||(r[6]=a=>t.value.cardholderName=a)},null,512),[[d,t.value.cardholderName]])]),r[33]||(r[33]=e("div",{class:"col-span-2"},[e("hr",{class:"my-2 border-gray-200 dark:border-gray-700"}),e("h3",{class:"font-medium mb-3 dark:text-white"},"Billing Information")],-1)),e("div",re,[r[24]||(r[24]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Street Address* ",-1)),l(e("input",{type:"text",placeholder:"123 Main St",class:"w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":r[7]||(r[7]=a=>t.value.billingAddress.line1=a)},null,512),[[d,t.value.billingAddress.line1]])]),e("div",te,[r[25]||(r[25]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Address Line 2 ",-1)),l(e("input",{type:"text",placeholder:"Apt, Suite, etc.",class:"w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":r[8]||(r[8]=a=>t.value.billingAddress.line2=a)},null,512),[[d,t.value.billingAddress.line2]])]),e("div",null,[r[26]||(r[26]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," City* ",-1)),l(e("input",{type:"text",placeholder:"City",class:"w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":r[9]||(r[9]=a=>t.value.billingAddress.city=a)},null,512),[[d,t.value.billingAddress.city]])]),e("div",null,[r[27]||(r[27]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," State* ",-1)),l(e("input",{type:"text",placeholder:"State",class:"w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":r[10]||(r[10]=a=>t.value.billingAddress.state=a)},null,512),[[d,t.value.billingAddress.state]])]),e("div",null,[r[28]||(r[28]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Postal Code* ",-1)),l(e("input",{type:"text",placeholder:"Postal Code",class:"w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":r[11]||(r[11]=a=>t.value.billingAddress.postalCode=a)},null,512),[[d,t.value.billingAddress.postalCode]])]),e("div",null,[r[29]||(r[29]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Country* ",-1)),l(e("input",{type:"text",placeholder:"Country",class:"w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":r[12]||(r[12]=a=>t.value.billingAddress.country=a)},null,512),[[d,t.value.billingAddress.country]])]),r[34]||(r[34]=e("div",{class:"col-span-2"},[e("hr",{class:"my-2 border-gray-200 dark:border-gray-700"}),e("h3",{class:"font-medium mb-3 dark:text-white"},"Customer Information (Optional)")],-1)),e("div",null,[r[30]||(r[30]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Customer ID ",-1)),l(e("input",{type:"text",placeholder:"Customer ID",class:"w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":r[13]||(r[13]=a=>t.value.customerId=a)},null,512),[[d,t.value.customerId]])]),e("div",null,[r[31]||(r[31]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Email ",-1)),l(e("input",{type:"email",placeholder:"customer@example.com",class:"w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":r[14]||(r[14]=a=>t.value.email=a)},null,512),[[d,t.value.email]])]),e("div",ae,[e("button",{class:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",onClick:k}," Clear Form "),e("button",{class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",disabled:!T.value,onClick:F}," Process Payment ",8,se)])])]),e("div",le,[e("div",de,[r[40]||(r[40]=e("h2",{class:"text-xl font-bold mb-4 dark:text-white"},"Transaction Summary",-1)),e("div",oe,[e("div",ne,[r[36]||(r[36]=e("span",{class:"text-gray-500 dark:text-gray-400"},"Amount:",-1)),e("span",ue,"$"+u(t.value.amount||"0.00"),1)]),e("div",ie,[r[37]||(r[37]=e("span",{class:"text-gray-500 dark:text-gray-400"},"Reference:",-1)),e("span",ge,u(t.value.reference||"—"),1)]),e("div",ye,[r[38]||(r[38]=e("span",{class:"text-gray-500 dark:text-gray-400"},"Payment Method:",-1)),e("span",be,u(P.value),1)]),e("div",me,[r[39]||(r[39]=e("span",{class:"text-gray-500 dark:text-gray-400"},"Card:",-1)),e("span",pe,u(S(t.value.cardNumber)||"—"),1)])])]),e("div",ce,[r[42]||(r[42]=e("h2",{class:"text-xl font-bold mb-4 dark:text-white"},"Recent Virtual Terminal Transactions",-1)),p(A)?(n(),o("div",xe,r[41]||(r[41]=[e("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-gray-900 dark:border-gray-100"},null,-1)]))):f.value.length===0?(n(),o("div",fe," No virtual terminal transactions found. ")):(n(),o("div",ke,[(n(!0),o(w,null,h(f.value,a=>(n(),o("div",{key:a.id,class:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-sm hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer",onClick:Se=>j(a.id)},[e("div",we,[e("span",he,"$"+u(a.amount.toFixed(2)),1),e("span",Ce,u(U(a.date)),1)]),e("div",Ve,[e("span",Ae,[L(u(a.paymentMethodName)+" ",1),a.cardLast4?(n(),o("span",Me,"•••• "+u(a.cardLast4),1)):v("",!0)]),e("span",null,[e("span",{class:c(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",D(a.status)])},u(a.status),3)])])],8,ve))),128))]))])])]),m.value?(n(),o("div",{key:0,class:c(["fixed bottom-4 right-4 p-4 rounded-lg shadow-lg",g.value==="success"?"bg-green-100 dark:bg-green-900":"bg-red-100 dark:bg-red-900"])},[e("div",Ie,[g.value==="success"?(n(),o("span",Ne,[C(p(O),{class:"w-5 h-5"})])):(n(),o("span",Pe,[C(p(Y),{class:"w-5 h-5"})])),e("span",{class:c(g.value==="success"?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300")},u(x.value),3)])],2)):v("",!0)]))}});export{$e as default};
