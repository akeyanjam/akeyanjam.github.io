import{d as $,r as l,o as E,c,b as o,e as t,C,j as U,y,f as p,B as z,u as i,i as A,t as a,F as I,m as B,X as L,z as T,h as d,q as W}from"./index-CBlyhhB_.js";import{u as Y}from"./paymentsStore-DGeoRBLV.js";import{C as q}from"./chevron-down-CAD7_O72.js";import{D as X}from"./download-CZMehmmv.js";const G={class:"dark:bg-gray-900"},H={class:"mb-6 flex justify-between items-center"},J={class:"flex space-x-2"},K={class:"relative"},O={class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 text-white font-medium rounded-lg transition-colors"},Q={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8"},Z={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 p-4"},tt={class:"text-2xl font-bold dark:text-white"},et={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},st={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 p-4"},at={class:"text-2xl font-bold dark:text-white"},rt={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},ot={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 p-4"},dt={class:"text-2xl font-bold dark:text-white"},lt={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},nt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 p-4"},it={class:"text-2xl font-bold dark:text-white"},ut={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},gt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden"},ct={key:0,class:"flex justify-center items-center h-64"},bt={key:1,class:"text-red-500 dark:text-red-400 text-center py-8"},xt={key:2,class:"text-center py-8 text-gray-500 dark:text-gray-400"},yt={key:3},pt={class:"overflow-x-auto"},vt={class:"w-full border-collapse"},mt={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ht={class:"px-6 py-4 whitespace-nowrap dark:text-gray-200"},ft={class:"px-6 py-4 whitespace-nowrap dark:text-gray-200"},kt={class:"px-6 py-4 whitespace-nowrap dark:text-gray-200"},wt={class:"px-6 py-4 whitespace-nowrap dark:text-gray-200"},_t={class:"px-6 py-4 whitespace-nowrap dark:text-gray-200"},Dt={class:"px-6 py-4 whitespace-nowrap dark:text-gray-200"},Ct={class:"px-6 py-4 whitespace-nowrap"},Tt={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},St={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 max-w-md w-full mx-4"},Vt={class:"flex justify-between items-center mb-4"},jt={class:"space-y-4"},Ft={class:"mt-6 flex justify-end space-x-3"},Et=$({__name:"CardPresentReportsView",setup(Mt){const v=Y(),{isLoading:S,error:m,fetchTransactions:V}=v,n=l("week"),b=l(""),x=l("");E(async()=>{try{await V();const r=new Date,e=new Date;e.setDate(r.getDate()-7),x.value=D(r),b.value=D(e)}catch(r){console.error("Error fetching transactions:",r)}});const u=c(()=>v.getCardPresentTransactions()),g=c(()=>u.value.length),h=c(()=>u.value.reduce((r,e)=>r+e.amount,0)),j=c(()=>g.value===0?0:h.value/g.value),F=c(()=>g.value===0?0:u.value.filter(e=>["captured","settled"].includes(e.status)).length/g.value*100),f=l(12.5),k=l(8.3),w=l(-2.1),_=l(.5),M=r=>{const e=new Date(r);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(e)},D=r=>{const e=r.getFullYear(),s=String(r.getMonth()+1).padStart(2,"0"),N=String(r.getDate()).padStart(2,"0");return`${e}-${s}-${N}`},P=r=>{switch(r){case"captured":case"settled":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"authorized":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"failed":case"voided":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";case"refunded":case"partially_refunded":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},R=()=>{console.log("Applying custom date range:",{start:b.value,end:x.value}),n.value="custom-applied"};return(r,e)=>(d(),o("div",G,[t("header",H,[e[7]||(e[7]=t("div",null,[t("h1",{class:"text-3xl font-bold dark:text-white"},"Card Present Reports"),t("p",{class:"text-gray-500 dark:text-gray-400 mt-2"},"View and analyze in-person payment transactions")],-1)),t("div",J,[t("div",K,[y(t("select",{class:"appearance-none px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent pr-8","onUpdate:modelValue":e[0]||(e[0]=s=>n.value=s)},e[5]||(e[5]=[C('<option value="today">Today</option><option value="yesterday">Yesterday</option><option value="week">Last 7 Days</option><option value="month">Last 30 Days</option><option value="custom">Custom Range</option>',5)]),512),[[z,n.value]]),p(i(q),{class:"absolute right-3 top-3 w-4 h-4 text-gray-400 pointer-events-none"})]),t("button",O,[p(i(X),{class:"w-5 h-5 mr-1 inline-block"}),e[6]||(e[6]=A(" Export Report "))])])]),t("section",Q,[t("div",Z,[e[8]||(e[8]=t("h3",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1"},"Total Transactions",-1)),t("p",tt,a(g.value),1),t("p",et,a(f.value>=0?"+":"")+a(f.value)+"% from previous period ",1)]),t("div",st,[e[9]||(e[9]=t("h3",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1"},"Total Volume",-1)),t("p",at,"$"+a(h.value.toFixed(2)),1),t("p",rt,a(k.value>=0?"+":"")+a(k.value)+"% from previous period ",1)]),t("div",ot,[e[10]||(e[10]=t("h3",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1"},"Average Ticket",-1)),t("p",dt,"$"+a(j.value.toFixed(2)),1),t("p",lt,a(w.value>=0?"+":"")+a(w.value)+"% from previous period ",1)]),t("div",nt,[e[11]||(e[11]=t("h3",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1"},"Success Rate",-1)),t("p",it,a(F.value.toFixed(1))+"%",1),t("p",ut,a(_.value>=0?"+":"")+a(_.value)+"% from previous period ",1)])]),e[18]||(e[18]=C('<section class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"><div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 p-6"><h2 class="text-lg font-bold mb-4 dark:text-white">Transaction Methods</h2><div class="h-64 flex items-center justify-center"><div class="w-full h-full flex items-center justify-center"><div class="text-center text-gray-500 dark:text-gray-400"><div class="text-sm">Chart placeholder - Distribution of transaction methods</div><div class="mt-3 grid grid-cols-3 gap-2 max-w-md mx-auto"><div class="flex items-center"><span class="w-3 h-3 bg-blue-500 rounded-full mr-1"></span><span class="text-xs">Contactless (45%)</span></div><div class="flex items-center"><span class="w-3 h-3 bg-green-500 rounded-full mr-1"></span><span class="text-xs">Chip (30%)</span></div><div class="flex items-center"><span class="w-3 h-3 bg-purple-500 rounded-full mr-1"></span><span class="text-xs">Swipe (15%)</span></div><div class="flex items-center"><span class="w-3 h-3 bg-yellow-500 rounded-full mr-1"></span><span class="text-xs">NFC (7%)</span></div><div class="flex items-center"><span class="w-3 h-3 bg-red-500 rounded-full mr-1"></span><span class="text-xs">Manual (3%)</span></div></div></div></div></div></div><div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 p-6"><h2 class="text-lg font-bold mb-4 dark:text-white">Transaction Volume by Day</h2><div class="h-64 flex items-center justify-center"><div class="w-full h-full flex items-center justify-center"><div class="text-center text-gray-500 dark:text-gray-400"><div class="text-sm">Chart placeholder - Daily transaction volume</div><div class="mt-3 flex justify-center space-x-2"><div class="h-32 w-10 bg-gray-100 dark:bg-gray-700 relative"><div class="absolute bottom-0 w-full bg-blue-500 h-[40%]"></div><div class="absolute bottom-0 w-full text-xs mt-2">Mon</div></div><div class="h-32 w-10 bg-gray-100 dark:bg-gray-700 relative"><div class="absolute bottom-0 w-full bg-blue-500 h-[65%]"></div><div class="absolute bottom-0 w-full text-xs mt-2">Tue</div></div><div class="h-32 w-10 bg-gray-100 dark:bg-gray-700 relative"><div class="absolute bottom-0 w-full bg-blue-500 h-[55%]"></div><div class="absolute bottom-0 w-full text-xs mt-2">Wed</div></div><div class="h-32 w-10 bg-gray-100 dark:bg-gray-700 relative"><div class="absolute bottom-0 w-full bg-blue-500 h-[75%]"></div><div class="absolute bottom-0 w-full text-xs mt-2">Thu</div></div><div class="h-32 w-10 bg-gray-100 dark:bg-gray-700 relative"><div class="absolute bottom-0 w-full bg-blue-500 h-[90%]"></div><div class="absolute bottom-0 w-full text-xs mt-2">Fri</div></div><div class="h-32 w-10 bg-gray-100 dark:bg-gray-700 relative"><div class="absolute bottom-0 w-full bg-blue-500 h-[85%]"></div><div class="absolute bottom-0 w-full text-xs mt-2">Sat</div></div><div class="h-32 w-10 bg-gray-100 dark:bg-gray-700 relative"><div class="absolute bottom-0 w-full bg-blue-500 h-[45%]"></div><div class="absolute bottom-0 w-full text-xs mt-2">Sun</div></div></div></div></div></div></div></section>',1)),t("section",gt,[e[14]||(e[14]=t("div",{class:"flex justify-between items-center p-6 border-b border-gray-100 dark:border-gray-700"},[t("h2",{class:"text-lg font-bold dark:text-white"},"Recent Card Present Transactions"),t("button",{class:"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 text-sm"}," View All ")],-1)),i(S)?(d(),o("div",ct,e[12]||(e[12]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 dark:border-gray-100"},null,-1)]))):i(m)?(d(),o("div",bt,a(i(m)),1)):u.value.length===0?(d(),o("div",xt," No card present transactions found. ")):(d(),o("div",yt,[t("div",pt,[t("table",vt,[e[13]||(e[13]=t("thead",null,[t("tr",{class:"bg-gray-50 dark:bg-gray-700 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},[t("th",{class:"px-6 py-3"},"Transaction ID"),t("th",{class:"px-6 py-3"},"Date"),t("th",{class:"px-6 py-3"},"Amount"),t("th",{class:"px-6 py-3"},"Payment Method"),t("th",{class:"px-6 py-3"},"Entry Method"),t("th",{class:"px-6 py-3"},"Terminal"),t("th",{class:"px-6 py-3"},"Status")])],-1)),t("tbody",mt,[(d(!0),o(I,null,B(u.value.slice(0,10),s=>(d(),o("tr",{key:s.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[t("td",ht,a(s.id),1),t("td",ft,a(M(s.date)),1),t("td",kt,"$"+a(s.amount.toFixed(2)),1),t("td",wt,a(s.paymentMethodName),1),t("td",_t,a(s.entryMethod||"Unknown"),1),t("td",Dt,a(s.terminalId||s.deviceId||"Unknown"),1),t("td",Ct,[t("span",{class:W(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",P(s.status)])},a(s.status),3)])]))),128))])])])]))]),n.value==="custom"?(d(),o("div",Tt,[t("div",St,[t("div",Vt,[e[15]||(e[15]=t("h3",{class:"text-xl font-bold dark:text-white"},"Select Date Range",-1)),t("button",{onClick:e[1]||(e[1]=s=>n.value="week"),class:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},[p(i(L),{class:"w-5 h-5"})])]),t("div",jt,[t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Start Date ",-1)),y(t("input",{type:"date",class:"w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":e[2]||(e[2]=s=>b.value=s)},null,512),[[T,b.value]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," End Date ",-1)),y(t("input",{type:"date",class:"w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":e[3]||(e[3]=s=>x.value=s)},null,512),[[T,x.value]])])]),t("div",Ft,[t("button",{onClick:e[4]||(e[4]=s=>n.value="week"),class:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}," Cancel "),t("button",{class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 text-white rounded-lg",onClick:R}," Apply ")])])])):U("",!0)]))}});export{Et as default};
