import{d as A,r as g,o as B,c as p,b as d,e as t,j as b,y as D,z as E,f as h,u,A as q,B as z,C as U,i as v,t as r,F as T,m as $,X as Q,q as S,h as n,x as X}from"./index-CBlyhhB_.js";import{u as G}from"./salesStore--0mzQDZj.js";import{C as H}from"./chevron-down-CAD7_O72.js";import{D as J}from"./download-CZMehmmv.js";const K={class:"dark:bg-gray-900"},O={class:"mb-6 flex justify-between items-center"},W={class:"flex space-x-2"},Y={class:"relative"},Z={class:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},tt={class:"relative"},et={class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 text-white font-medium rounded-lg transition-colors"},st={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden"},at={key:0,class:"flex justify-center items-center h-64"},rt={key:1,class:"text-red-500 dark:text-red-400 text-center py-8"},ot={key:2,class:"text-center py-8 text-gray-500 dark:text-gray-400"},dt={key:3},nt={class:"overflow-x-auto"},lt={class:"w-full border-collapse"},it={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ut={class:"px-6 py-4 whitespace-nowrap dark:text-gray-200"},gt={class:"px-6 py-4 whitespace-nowrap dark:text-gray-200"},xt={class:"px-6 py-4 whitespace-nowrap dark:text-gray-200"},ct={class:"px-6 py-4 whitespace-nowrap dark:text-gray-200"},yt={class:"px-6 py-4 whitespace-nowrap dark:text-gray-200"},pt={class:"px-6 py-4 whitespace-nowrap"},bt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},vt=["onClick"],kt=["onClick"],mt={class:"px-6 py-4 bg-gray-50 dark:bg-gray-700 flex justify-between items-center border-t border-gray-200 dark:border-gray-600"},ht={class:"text-sm text-gray-500 dark:text-gray-400"},ft={class:"font-medium"},wt={class:"font-medium"},_t={class:"font-medium"},Ct={class:"flex space-x-2"},Dt=["disabled"],Tt=["disabled"],$t={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},St={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 max-w-3xl w-full mx-4"},Ft={class:"flex justify-between items-center mb-4"},jt={key:0,class:"space-y-4"},Pt={class:"grid grid-cols-2 gap-4"},Mt={class:"dark:text-white"},Vt={class:"dark:text-white"},Lt={class:"dark:text-white"},Nt={class:"dark:text-white"},Rt={class:"border rounded-lg dark:border-gray-700 overflow-hidden"},It={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},At={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Bt={class:"px-6 py-4 whitespace-nowrap text-sm dark:text-gray-200"},Et={class:"px-6 py-4 whitespace-nowrap text-sm dark:text-gray-200"},qt={class:"px-6 py-4 whitespace-nowrap text-sm dark:text-gray-200"},zt={class:"px-6 py-4 whitespace-nowrap text-sm dark:text-gray-200"},Ut={class:"border-t pt-4 dark:border-gray-700"},Qt={class:"flex justify-between mb-2"},Xt={class:"dark:text-white"},Gt={class:"flex justify-between mb-2"},Ht={class:"dark:text-white"},Jt={key:0,class:"flex justify-between mb-2"},Kt={class:"dark:text-white"},Ot={key:1,class:"flex justify-between mb-2"},Wt={class:"dark:text-white"},Yt={class:"flex justify-between font-bold mt-2 pt-2 border-t dark:border-gray-700"},Zt={class:"dark:text-white"},te={class:"flex justify-end space-x-3 mt-6"},de=A({__name:"TransactionsView",setup(ee){X();const x=G(),{isLoading:F,error:f,fetchTransactions:j}=x,l=g(1),c=g(10),k=g(""),m=g("all"),y=g(!1),o=g(null);B(async()=>{try{await j()}catch(a){console.error("Error fetching transactions:",a)}});const i=p(()=>{if(!x.transactions||x.transactions.length===0)return[];let a=[...x.transactions];if(m.value!=="all"&&(a=a.filter(e=>e.status.toLowerCase()===m.value.toLowerCase())),k.value){const e=k.value.toLowerCase();a=a.filter(s=>s.id.toLowerCase().includes(e)||s.customer.name.toLowerCase().includes(e)||s.paymentMethod.toLowerCase().includes(e))}return a.sort((e,s)=>new Date(s.date).getTime()-new Date(e.date).getTime())});p(()=>{const a=(l.value-1)*c.value,e=a+c.value;return i.value.slice(a,e)});const P=p(()=>Math.ceil(i.value.length/c.value)),M=p(()=>(l.value-1)*c.value+1),V=p(()=>{const a=l.value*c.value;return a>i.value.length?i.value.length:a}),w=a=>{const e=new Date(a);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(e)},_=a=>{switch(a){case"completed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"failed":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";case"refunded":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},L=a=>{const e=x.transactions.find(s=>s.id===a);e&&(o.value=e,y.value=!0)},C=a=>{console.log(`Printing receipt for transaction ${a}`)},N=a=>{console.log(`Initiating refund for transaction ${a}`),y.value=!1},R=a=>a.items.reduce((e,s)=>e+s.total,0);return(a,e)=>(n(),d("div",K,[t("header",O,[e[10]||(e[10]=t("div",null,[t("h1",{class:"text-3xl font-bold dark:text-white"},"Transactions"),t("p",{class:"text-gray-500 dark:text-gray-400 mt-2"},"View and manage your transaction history")],-1)),t("div",W,[t("div",Y,[D(t("input",{type:"text",placeholder:"Search transactions...",class:"px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":e[0]||(e[0]=s=>k.value=s)},null,512),[[E,k.value]]),t("button",Z,[h(u(q),{class:"w-5 h-5"})])]),t("div",tt,[D(t("select",{class:"appearance-none px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent pr-8","onUpdate:modelValue":e[1]||(e[1]=s=>m.value=s)},e[8]||(e[8]=[U('<option value="all">All Statuses</option><option value="completed">Completed</option><option value="pending">Pending</option><option value="failed">Failed</option><option value="refunded">Refunded</option>',5)]),512),[[z,m.value]]),h(u(H),{class:"absolute right-3 top-3 w-4 h-4 text-gray-400 pointer-events-none"})]),t("button",et,[h(u(J),{class:"w-5 h-5 mr-1 inline-block"}),e[9]||(e[9]=v(" Export "))])])]),t("section",st,[u(F)?(n(),d("div",at,e[11]||(e[11]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 dark:border-gray-100"},null,-1)]))):u(f)?(n(),d("div",rt,r(u(f)),1)):i.value.length===0?(n(),d("div",ot," No transactions found. ")):(n(),d("div",dt,[t("div",nt,[t("table",lt,[e[12]||(e[12]=t("thead",null,[t("tr",{class:"bg-gray-50 dark:bg-gray-700 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},[t("th",{class:"px-6 py-3"},"Transaction ID"),t("th",{class:"px-6 py-3"},"Date"),t("th",{class:"px-6 py-3"},"Customer"),t("th",{class:"px-6 py-3"},"Payment Method"),t("th",{class:"px-6 py-3"},"Amount"),t("th",{class:"px-6 py-3"},"Status"),t("th",{class:"px-6 py-3"},"Actions")])],-1)),t("tbody",it,[(n(!0),d(T,null,$(i.value,s=>(n(),d("tr",{key:s.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[t("td",ut,r(s.id),1),t("td",gt,r(w(s.date)),1),t("td",xt,r(s.customer.name),1),t("td",ct,r(s.paymentMethod),1),t("td",yt,"$"+r(s.total.toFixed(2)),1),t("td",pt,[t("span",{class:S(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",_(s.status)])},r(s.status),3)]),t("td",bt,[t("button",{class:"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 mr-3",onClick:I=>L(s.id)}," View ",8,vt),t("button",{class:"text-green-600 dark:text-green-400 hover:text-green-900 dark:hover:text-green-300 mr-3",onClick:I=>C(s.id)}," Receipt ",8,kt)])]))),128))])])]),t("div",mt,[t("div",ht,[e[13]||(e[13]=v(" Showing ")),t("span",ft,r(M.value),1),e[14]||(e[14]=v(" to ")),t("span",wt,r(V.value),1),e[15]||(e[15]=v(" of ")),t("span",_t,r(i.value.length),1),e[16]||(e[16]=v(" transactions "))]),t("div",Ct,[t("button",{class:"px-3 py-1 rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",disabled:l.value===1,onClick:e[2]||(e[2]=s=>l.value--)}," Previous ",8,Dt),t("button",{class:"px-3 py-1 rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",disabled:l.value===P.value,onClick:e[3]||(e[3]=s=>l.value++)}," Next ",8,Tt)])])]))]),y.value?(n(),d("div",$t,[t("div",St,[t("div",Ft,[e[17]||(e[17]=t("h3",{class:"text-xl font-bold dark:text-white"},"Transaction Details",-1)),t("button",{onClick:e[4]||(e[4]=s=>y.value=!1),class:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},[h(u(Q),{class:"w-5 h-5"})])]),o.value?(n(),d("div",jt,[t("div",Pt,[t("div",null,[e[18]||(e[18]=t("h4",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Transaction ID",-1)),t("p",Mt,r(o.value.id),1)]),t("div",null,[e[19]||(e[19]=t("h4",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Date",-1)),t("p",Vt,r(w(o.value.date)),1)]),t("div",null,[e[20]||(e[20]=t("h4",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Customer",-1)),t("p",Lt,r(o.value.customer.name),1)]),t("div",null,[e[21]||(e[21]=t("h4",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Payment Method",-1)),t("p",Nt,r(o.value.paymentMethod),1)]),t("div",null,[e[22]||(e[22]=t("h4",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Status",-1)),t("span",{class:S(["px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full",_(o.value.status)])},r(o.value.status),3)])]),t("div",null,[e[24]||(e[24]=t("h4",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2"},"Items",-1)),t("div",Rt,[t("table",It,[e[23]||(e[23]=t("thead",{class:"bg-gray-50 dark:bg-gray-700"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Item"),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Price"),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Quantity"),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Total")])],-1)),t("tbody",At,[(n(!0),d(T,null,$(o.value.items,s=>(n(),d("tr",{key:s.id},[t("td",Bt,r(s.name),1),t("td",Et,"$"+r(s.unitPrice.toFixed(2)),1),t("td",qt,r(s.quantity),1),t("td",zt,"$"+r(s.total.toFixed(2)),1)]))),128))])])])]),t("div",Ut,[t("div",Qt,[e[25]||(e[25]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Subtotal",-1)),t("span",Xt,"$"+r(R(o.value).toFixed(2)),1)]),t("div",Gt,[e[26]||(e[26]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Tax",-1)),t("span",Ht,"$"+r(o.value.tax.toFixed(2)),1)]),o.value.discount?(n(),d("div",Jt,[e[27]||(e[27]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Discount",-1)),t("span",Kt,"-$"+r(o.value.discount.toFixed(2)),1)])):b("",!0),o.value.tip?(n(),d("div",Ot,[e[28]||(e[28]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Tip",-1)),t("span",Wt,"$"+r(o.value.tip.toFixed(2)),1)])):b("",!0),t("div",Yt,[e[29]||(e[29]=t("span",{class:"dark:text-white"},"Total",-1)),t("span",Zt,"$"+r(o.value.total.toFixed(2)),1)])]),t("div",te,[t("button",{class:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300",onClick:e[5]||(e[5]=s=>y.value=!1)}," Close "),t("button",{class:"px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 text-white",onClick:e[6]||(e[6]=s=>C(o.value.id))}," Print Receipt "),o.value.status!=="refunded"?(n(),d("button",{key:0,class:"px-4 py-2 rounded-lg bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 text-white",onClick:e[7]||(e[7]=s=>N(o.value.id))}," Refund ")):b("",!0)])])):b("",!0)])])):b("",!0)]))}});export{de as default};
