import{d as Q,r as i,o as X,c as k,b as n,e,j as c,y as _,z as j,f as h,u,A as G,B as H,i as l,t as a,F as A,m as F,X as N,E as J,q as P,h as d,x as K}from"./index-CBlyhhB_.js";import{u as W}from"./salesStore--0mzQDZj.js";import{C as Y}from"./chevron-down-CAD7_O72.js";import{R as Z}from"./refresh-ccw-Z9glMWGs.js";const ee={class:"returns-container dark:bg-gray-900"},te={class:"mb-6 flex justify-between items-center"},re={class:"flex space-x-2"},se={class:"relative"},ae={class:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},oe={class:"relative"},ne={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden"},de={key:0,class:"flex justify-center items-center h-64"},le={key:1,class:"text-red-500 dark:text-red-400 text-center py-8"},ie={key:2,class:"text-center py-8 text-gray-500 dark:text-gray-400"},ue={key:3},ge={class:"overflow-x-auto"},xe={class:"w-full border-collapse"},ce={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ye={class:"px-6 py-4 whitespace-nowrap dark:text-gray-200"},pe={class:"px-6 py-4 whitespace-nowrap dark:text-gray-200"},be={class:"px-6 py-4 whitespace-nowrap dark:text-gray-200"},ve={class:"px-6 py-4 whitespace-nowrap dark:text-gray-200"},ke={class:"px-6 py-4 whitespace-nowrap dark:text-gray-200"},he={class:"px-6 py-4 whitespace-nowrap dark:text-gray-200"},fe={class:"px-6 py-4 whitespace-nowrap"},me={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},we=["onClick"],_e=["onClick"],Ce=["onClick"],Re={class:"px-6 py-4 bg-gray-50 dark:bg-gray-700 flex justify-between items-center border-t border-gray-200 dark:border-gray-600"},De={class:"text-sm text-gray-500 dark:text-gray-400"},$e={class:"font-medium"},Te={class:"font-medium"},Se={class:"font-medium"},je={class:"flex space-x-2"},Ae=["disabled"],Fe=["disabled"],Ne={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Pe={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 max-w-3xl w-full mx-4"},Ve={class:"flex justify-between items-center mb-4"},Me={key:0,class:"space-y-4"},Le={class:"grid grid-cols-2 gap-4"},Ee={class:"dark:text-white"},Ue={class:"dark:text-white"},qe={class:"dark:text-white"},ze={class:"dark:text-white"},Be={class:"dark:text-white"},Ie={class:"text-gray-700 dark:text-gray-300 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},Oe={class:"border rounded-lg dark:border-gray-700 overflow-hidden"},Qe={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Xe={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Ge={class:"px-6 py-4 whitespace-nowrap text-sm dark:text-gray-200"},He={class:"px-6 py-4 whitespace-nowrap text-sm dark:text-gray-200"},Je={class:"px-6 py-4 whitespace-nowrap text-sm dark:text-gray-200"},Ke={class:"px-6 py-4 whitespace-nowrap text-sm dark:text-gray-200"},We={class:"px-6 py-4 whitespace-nowrap text-sm dark:text-gray-200"},Ye={class:"border-t pt-4 dark:border-gray-700"},Ze={class:"flex justify-between font-bold"},et={class:"dark:text-white"},tt={class:"flex justify-end space-x-3 mt-6"},rt={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},st={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 max-w-3xl w-full mx-4"},at={class:"flex justify-between items-center mb-4"},ot={class:"space-y-4"},nt={class:"flex"},dt={class:"flex justify-end space-x-3 mt-6"},ct=Q({__name:"ReturnsView",setup(lt){K();const p=W(),{isLoading:V,error:C,fetchReturns:M}=p,g=i(1),b=i(10),f=i(""),m=i("all"),x=i(!1),o=i(null),v=i(!1),w=i({transactionId:""});X(async()=>{try{await M()}catch(s){console.error("Error fetching returns:",s)}});const y=k(()=>{if(!p.returns||p.returns.length===0)return[];let s=[...p.returns];if(m.value!=="all"&&(s=s.filter(t=>t.status.toLowerCase()===m.value.toLowerCase())),f.value){const t=f.value.toLowerCase();s=s.filter(r=>r.id.toLowerCase().includes(t)||r.originalTransactionId.toLowerCase().includes(t)||r.customer.name.toLowerCase().includes(t))}return s.sort((t,r)=>new Date(r.date).getTime()-new Date(t.date).getTime())}),L=k(()=>{const s=(g.value-1)*b.value,t=s+b.value;return y.value.slice(s,t)}),E=k(()=>Math.ceil(y.value.length/b.value)),U=k(()=>(g.value-1)*b.value+1),q=k(()=>{const s=g.value*b.value;return s>y.value.length?y.value.length:s}),R=s=>{const t=new Date(s);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)},D=s=>{switch(s){case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"processed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"declined":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},z=s=>{const t=p.returns.find(r=>r.id===s);t&&(o.value=t,x.value=!0)},$=s=>{console.log(`Approving return ${s}`),x.value=!1},T=s=>{console.log(`Declining return ${s}`),x.value=!1},B=()=>{o.value&&(console.log(`Viewing original transaction ${o.value.originalTransactionId}`),x.value=!1)},I=()=>{v.value=!0},O=()=>{console.log(`Creating new return for transaction ${w.value.transactionId}`),v.value=!1};return(s,t)=>(d(),n("div",ee,[e("header",te,[t[13]||(t[13]=e("div",null,[e("h1",{class:"text-3xl font-bold dark:text-white"},"Returns & Exchanges"),e("p",{class:"text-gray-500 dark:text-gray-400 mt-2"},"Process returns and exchanges from customers")],-1)),e("div",re,[e("div",se,[_(e("input",{type:"text",placeholder:"Search returns...",class:"px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":t[0]||(t[0]=r=>f.value=r)},null,512),[[j,f.value]]),e("button",ae,[h(u(G),{class:"w-5 h-5"})])]),e("div",oe,[_(e("select",{class:"appearance-none px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent pr-8","onUpdate:modelValue":t[1]||(t[1]=r=>m.value=r)},t[11]||(t[11]=[e("option",{value:"all"},"All Statuses",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"processed"},"Processed",-1),e("option",{value:"declined"},"Declined",-1)]),512),[[H,m.value]]),h(u(Y),{class:"absolute right-3 top-3 w-4 h-4 text-gray-400 pointer-events-none"})]),e("button",{class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 text-white font-medium rounded-lg transition-colors",onClick:I},[h(u(Z),{class:"w-5 h-5 mr-1 inline-block"}),t[12]||(t[12]=l(" New Return "))])])]),e("section",ne,[u(V)?(d(),n("div",de,t[14]||(t[14]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 dark:border-gray-100"},null,-1)]))):u(C)?(d(),n("div",le,a(u(C)),1)):y.value.length===0?(d(),n("div",ie," No returns found. ")):(d(),n("div",ue,[e("div",ge,[e("table",xe,[t[15]||(t[15]=e("thead",null,[e("tr",{class:"bg-gray-50 dark:bg-gray-700 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},[e("th",{class:"px-6 py-3"},"Return ID"),e("th",{class:"px-6 py-3"},"Original Transaction"),e("th",{class:"px-6 py-3"},"Date"),e("th",{class:"px-6 py-3"},"Customer"),e("th",{class:"px-6 py-3"},"Items"),e("th",{class:"px-6 py-3"},"Refund Amount"),e("th",{class:"px-6 py-3"},"Status"),e("th",{class:"px-6 py-3"},"Actions")])],-1)),e("tbody",ce,[(d(!0),n(A,null,F(L.value,r=>(d(),n("tr",{key:r.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",ye,a(r.id),1),e("td",pe,a(r.originalTransactionId),1),e("td",be,a(R(r.date)),1),e("td",ve,a(r.customer.name),1),e("td",ke,a(r.items.length),1),e("td",he,"$"+a(r.refundAmount.toFixed(2)),1),e("td",fe,[e("span",{class:P(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",D(r.status)])},a(r.status),3)]),e("td",me,[e("button",{class:"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 mr-3",onClick:S=>z(r.id)}," View ",8,we),r.status==="pending"?(d(),n("button",{key:0,class:"text-green-600 dark:text-green-400 hover:text-green-900 dark:hover:text-green-300 mr-3",onClick:S=>$(r.id)}," Approve ",8,_e)):c("",!0),r.status==="pending"?(d(),n("button",{key:1,class:"text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300",onClick:S=>T(r.id)}," Decline ",8,Ce)):c("",!0)])]))),128))])])]),e("div",Re,[e("div",De,[t[16]||(t[16]=l(" Showing ")),e("span",$e,a(U.value),1),t[17]||(t[17]=l(" to ")),e("span",Te,a(q.value),1),t[18]||(t[18]=l(" of ")),e("span",Se,a(y.value.length),1),t[19]||(t[19]=l(" returns "))]),e("div",je,[e("button",{class:"px-3 py-1 rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",disabled:g.value===1,onClick:t[2]||(t[2]=r=>g.value--)}," Previous ",8,Ae),e("button",{class:"px-3 py-1 rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",disabled:g.value===E.value,onClick:t[3]||(t[3]=r=>g.value++)}," Next ",8,Fe)])])]))]),x.value?(d(),n("div",Ne,[e("div",Pe,[e("div",Ve,[t[20]||(t[20]=e("h3",{class:"text-xl font-bold dark:text-white"},"Return Details",-1)),e("button",{onClick:t[4]||(t[4]=r=>x.value=!1),class:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},[h(u(N),{class:"w-5 h-5"})])]),o.value?(d(),n("div",Me,[e("div",Le,[e("div",null,[t[21]||(t[21]=e("h4",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Return ID",-1)),e("p",Ee,a(o.value.id),1)]),e("div",null,[t[22]||(t[22]=e("h4",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Original Transaction",-1)),e("p",Ue,[e("a",{href:"#",class:"text-blue-600 dark:text-blue-400 hover:underline",onClick:J(B,["prevent"])},a(o.value.originalTransactionId),1)])]),e("div",null,[t[23]||(t[23]=e("h4",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Date",-1)),e("p",qe,a(R(o.value.date)),1)]),e("div",null,[t[24]||(t[24]=e("h4",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Customer",-1)),e("p",ze,a(o.value.customer.name),1)]),e("div",null,[t[25]||(t[25]=e("h4",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Status",-1)),e("span",{class:P(["px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full",D(o.value.status)])},a(o.value.status),3)]),e("div",null,[t[26]||(t[26]=e("h4",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Refund Method",-1)),e("p",Be,a(o.value.refundMethod),1)])]),e("div",null,[t[27]||(t[27]=e("h4",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1"},"Reason for Return",-1)),e("p",Ie,a(o.value.reason),1)]),e("div",null,[t[29]||(t[29]=e("h4",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2"},"Returned Items",-1)),e("div",Oe,[e("table",Qe,[t[28]||(t[28]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Item"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Quantity"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Unit Price"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Total"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Reason")])],-1)),e("tbody",Xe,[(d(!0),n(A,null,F(o.value.items,r=>(d(),n("tr",{key:r.id},[e("td",Ge,a(r.name),1),e("td",He,a(r.quantity),1),e("td",Je,"$"+a(r.unitPrice.toFixed(2)),1),e("td",Ke,"$"+a(r.total.toFixed(2)),1),e("td",We,a(r.reason),1)]))),128))])])])]),e("div",Ye,[e("div",Ze,[t[30]||(t[30]=e("span",{class:"dark:text-white"},"Total Refund Amount",-1)),e("span",et,"$"+a(o.value.refundAmount.toFixed(2)),1)])]),e("div",tt,[e("button",{class:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300",onClick:t[5]||(t[5]=r=>x.value=!1)}," Close "),o.value.status==="pending"?(d(),n("button",{key:0,class:"px-4 py-2 rounded-lg bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800 text-white",onClick:t[6]||(t[6]=r=>$(o.value.id))}," Approve ")):c("",!0),o.value.status==="pending"?(d(),n("button",{key:1,class:"px-4 py-2 rounded-lg bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 text-white",onClick:t[7]||(t[7]=r=>T(o.value.id))}," Decline ")):c("",!0)])])):c("",!0)])])):c("",!0),v.value?(d(),n("div",rt,[e("div",st,[e("div",at,[t[31]||(t[31]=e("h3",{class:"text-xl font-bold dark:text-white"},"Create New Return",-1)),e("button",{onClick:t[8]||(t[8]=r=>v.value=!1),class:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},[h(u(N),{class:"w-5 h-5"})])]),e("div",ot,[e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Original Transaction ID ",-1)),e("div",nt,[_(e("input",{type:"text",placeholder:"Enter transaction ID",class:"flex-1 px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":t[9]||(t[9]=r=>w.value.transactionId=r)},null,512),[[j,w.value.transactionId]]),t[32]||(t[32]=e("button",{class:"ml-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 text-white font-medium rounded-lg transition-colors"}," Find ",-1))]),t[34]||(t[34]=e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Enter the transaction ID from the original purchase ",-1))]),t[35]||(t[35]=e("p",{class:"text-center py-4 text-gray-500 dark:text-gray-400"},[l(" This is a placeholder for a full return form, which would include: "),e("br"),l("- Customer information "),e("br"),l("- Items being returned with quantities "),e("br"),l("- Reason for each item "),e("br"),l("- Refund method selection ")],-1)),e("div",dt,[e("button",{class:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300",onClick:t[10]||(t[10]=r=>v.value=!1)}," Cancel "),e("button",{class:"px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 text-white",onClick:O}," Create Return ")])])])])):c("",!0)]))}});export{ct as default};
